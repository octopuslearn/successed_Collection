C51 COMPILER V9.54   KEYCORD                                                               05/19/2023 15:28:17 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE KEYCORD
OBJECT MODULE PLACED IN .\Objects\keycord.obj
COMPILER INVOKED BY: D:\SoftwareInstall\MDK_51\C51\BIN\C51.EXE keycord.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRI
                    -NT(.\Listings\keycord.lst) TABS(2) OBJECT(.\Objects\keycord.obj)

line level    source

   1          /******************************/
   2          /*目的，使用一个按键控制小车的五种运动方式*/
   3          #include "keycord.h"
   4          
   5          bit keybackup=1;//按键存储值
   6          bit keydate=0;//按键当前值
   7          
   8          void Delay100ms();
   9          void carmode(unsigned char mode);
  10          
  11          unsigned char cnt=0;//按键按下次数
  12          
  13          /*按键函数*/
  14          void keyjudgement()
  15          { 
  16   1        keyout5=0;//将键盘输出值设置为低电平
  17   1        while(1)
  18   1        {
  19   2          keydate=keyin4;//将键盘输入值赋值给键盘当前值
  20   2          if(keydate!=keybackup)
  21   2          {
  22   3            Delay100ms();//延时100ms
  23   3            if(keydate==keyin4)//倘若经过延时后按键值仍=当前值
  24   3            {
  25   4              if(keybackup==1)//倘若上次为1，而当前变为了0，那么视为按下
  26   4              {
  27   5                cnt++;
  28   5                carmode(cnt);
  29   5                if(cnt>4)
  30   5                {
  31   6                  cnt=0;
  32   6                }
  33   5              }
  34   4              keybackup=keydate;//更新当前值为备份
  35   4            }
  36   3          }
  37   2        }
  38   1      }
  39          
  40          void Delay100ms()   //@11.0592MHz,延时100ms
  41          {
  42   1        unsigned char i, j;
  43   1      
  44   1        i = 180;
  45   1        j = 73;
  46   1        do
  47   1        {
  48   2          while (--j);
  49   2        } while (--i);
  50   1      }
  51          
  52          /*小车运动模式函数，mode-运动模式*/
  53          void carmode(unsigned char cnt)
  54          {
C51 COMPILER V9.54   KEYCORD                                                               05/19/2023 15:28:17 PAGE 2   

  55   1        switch(cnt)
  56   1        {
  57   2          case 1:go();break;//*前进*/
  58   2          case 2:back();break;//*后退*/
  59   2          case 3:turnleft();break;//*左转*/
  60   2          case 4:turnright();break;//*右转*/
  61   2          case 5:stop();break;//*停止*/
  62   2          default:break;
  63   2        }
  64   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     94    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
